fct_exists(){ true ${1:?No fct specified};set|grep "^$1\s*()">/dev/null 2>&1;};fct_def(){ for FCT;do type "$FCT" 2>/dev/null|tail -n +2;done;};fct_tiny(){ fct_def "$@"|tr '\n' ';'|sed -e 's/()\s*;/()/' -e 's/{\s*;/{/g' -e 's/;}/;}/g' -e 's/;;/;/g' -e 's/do\s*;/do/g' -e 's/then\s*;/then/g' -e 's/;$//';};fct_content(){ for FCT;do type "$FCT" 2>/dev/null|head -n -1|tail -n +4;done;};alias_content(){ for ALIAS;do type "$FCT" 2>/dev/null|awk -F '«|»' '/alias/{print $2}';done;};fct_eval(){ local FCT="${1:?No fct specified}";shift;echo "$(fct_tiny "$FCT") ; $FCT" "$@";};fct_append(){ local FCT="${1:?No fct specified}";shift;eval "${FCT}() { $(fct_content $FCT); $@; }";};fct_prepend(){ local FCT="${1:?No fct specified}";shift;eval "${FCT}() { $@; $(fct_content $FCT); }";};fct_collision(){ for ALIAS in $(alias|awk -F '[= ]' '{print $2}');do [ "${1:-$ALIAS}" = "$ALIAS" ]&&fct_exists "$ALIAS"&&echo "$ALIAS";done;};fct_wrap(){ for SCRIPT;do SCRIPT="$(readlink -f "$SCRIPT")";while IFS= read -r FCT;do alias $FCT="(unalias -a; . $SCRIPT; eval $FCT)";done<<EOF
$(awk -F '(' '/^.*_.*\s*\(\)\s*\{?$/ {print $1}' "$SCRIPT")
EOF
done;}