if command -v screen>/dev/null;then if [ -z "$STY" -a -n "$SSH_CONNECTION" -a "${SCREEN_AUTOLOAD#*ssh}" != "$SCREEN_AUTOLOAD" ];then SCREEN_AUTOLOAD="yes";fi;screen(){ [ -z "$SCREEN_DISPLAY" ]&&export SCREEN_DISPLAY="$DISPLAY";if [ $# = 0 ];then command -p screen -R;else command -p screen "$@";fi;};screen_send(){ local SESSION="${1:?No session specified...}";shift $(min 1 $#);command -p screen -S "$SESSION" -X stuff "^C\n${@}\n";};screen_setdisplay(){ screen_send "$1" "export DISPLAY=$DISPLAY";};screen_ls(){ command -p screen -q -ls;if [ $? -ne 9 ];then screen -ls;fi;};alias screen_recall='screen -r';alias screen_restore='screen -R -D';alias screen_quit='screen -X quit -S';alias screen_killdetached="screen -ls | awk -F '.' '/Detached/{print \$1}' | xargs -r kill";alias screen_killall="screen -ls | awk -F '.' '/pts/{print \$1}' | xargs -r kill";alias screen_clean='screen -wipe';alias screen_attach='reptyr';alias screen_fork='screen -d -m';alias scls='screen_ls';alias scr='screen_restore';alias sck='screen_quit';if [ -z "$STY" -a -z "$SCREEN_LOADED" ];then if [ "$SCREEN_AUTOLOAD" = "yes" ]&&shell_isinteractive&&shell_islogin;then screen_restore 2>/dev/null;fi;fi;export SCREEN_LOADED=1;[ "${1#screen}" != "$1" ]&&"$@"||true;fi